# KODA.md — Контекст проекта Java Projectify

## Обзор проекта

**Java Projectify** — это CLI-инструмент для автоматического преобразования набора Java-файлов в корректную структуру проекта на основе деклараций пакетов. Инструмент анализирует исходные файлы, извлекает информацию о пакетах и переorganizовывает файлы в соответствующую директорийную структуру.

### Основные характеристики

| Параметр | Значение |
|----------|----------|
| Название | java-projectify (jpfy) |
| Версия | 0.0.2-SNAPSHOT |
| Java | 21 |
| Система сборки | Apache Maven |
| CLI-фреймворк | PicoCLI 4.7.7 |
| Лицензия | Отсутствует (GitHub SCM) |

### Архитектура

Проект построен на принципах разделения интерфейсов и реализаций:

- **App.java** — точка входа, CLI-обёртка с использованием PicoCLI
- **JavaFile.java** — интерфейс для работы с Java-файлами
- **JavaFileImpl.java** — реализация парсинга Java-файла и извлечения пакета
- **Jpkg.java** — интерфейс для представления пакета
- **JpkgImpl.java** — реализация преобразования имени пакета в путь

## Сборка и запуск

### Основные команды Maven

```bash
# Сборка проекта с созданием uber-jar
mvn clean package

# Запуск через Maven Exec Plugin
mvn exec:java

# Проверка кода (Checkstyle)
mvn checkstyle:check

# Генерация отчёта Checkstyle
mvn checkstyle:checkstyle

# Релиз
mvn release:prepare release:perform
```

### Запуск собранного приложения

После сборки доступен исполняемый JAR-файл:

```bash
# Запуск с указанием исходной директории
java -jar target/java-projectify-0.0.2-SNAPSHOT-full.jar /путь/к/файлам
```

### Использование CLI

```bash
# Базовая команда — преобразование Java-файлов в текущей директории
jpfy .

# Справка по команде
jpfy --help
```

## Структура кода

### Соглашения по именованию

- **Пакет по умолчанию:** `org.sctt.tools.jpfy`
- **Стиль именования:** CamelCase для классов, snake_case не используется
- **Финальные классы:** Классы без наследования объявляются как `final`

### Стиль документации

- Каждый публичный класс и метод содержит Javadoc-документацию
- Описание краткое, начинается с глагола для методов
- Параметры документируются тегом `@param`
- Возвращаемые значения — тегом `@return`

### Обработка ошибок

- В `JavaFileImpl` используется `RuntimeException` при невозможности прочитать файл
- В `App` исключения перехваваются и выводятся через `e.printStackTrace()`

## Зависимости

### Транзитивные зависимости

| Библиотека | Версия | Назначение |
|------------|--------|------------|
| PicoCLI | 4.7.7 | Создание командной строки |
| Checkstyle | 10.23.1 | Статический анализ кода |

## Правила разработки

### Проверка качества кода

Перед коммитом рекомендуется выполнять:

```bash
mvn clean validate
```

Это запустит Checkstyle и проверит соответствие стандартам кодирования.

### Версионирование

- Используется семантическое версионирование (Major.Minor.Patch)
- SNAPSHOT-версии для активной разработки
- Maven Release Plugin для официальных релизов

## TODO и замечания

- **Сборка uber-jar:** Maven Shade Plugin настроен, но требуется проверка работоспособности
- **Тесты:** Отсутствуют модульные тесты; рекомендуется добавить
- **Лицензия:** Не указана; следует добавить для публичных репозиториев
- **Конфигурация Checkstyle:** Используются настройки по умолчанию; кастомные правила отсутствуют